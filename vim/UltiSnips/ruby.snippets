global !p
import re

def show_if(to_show, length_of):
    return to_show if len(length_of) > 0 else ''

def prefix_words(string, prefix):
    return re.sub(r'\b(\w)', prefix + r'\1', string)
endglobal

snippet attp "Add private attr_reader" b
attr_reader $1
private $1
$0
endsnippet

snippet init "Add constructor" b
def initialize`!p snip.rv = show_if('(', t[1])`$1`!p snip.rv = show_if(')', t[1])`
  `!p snip.rv = prefix_words(t[1], '@')` `!p snip.rv = show_if('=', t[1])` $1$0
end
endsnippet
